<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pokt.ai Dashboard - Real Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Fetch real dashboard data
        async function loadDashboardData() {
            try {
                const response = await fetch('/api/dashboard/stats');
                if (response.ok) {
                    const data = await response.json();
                    updateDashboard(data);
                } else {
                    console.error('Failed to fetch dashboard data:', response.status);
                    showFallbackData();
                }
            } catch (error) {
                console.error('Error fetching dashboard data:', error);
                showFallbackData();
            }
        }

        function updateDashboard(data) {
            document.getElementById('totalRelays').textContent = formatNumber(data.totalRelays);
            document.getElementById('monthlyCost').textContent = '$' + data.monthlyCost.toFixed(2);
            document.getElementById('activeEndpoints').textContent = data.activeEndpoints;
            document.getElementById('planType').textContent = data.planType;
            document.getElementById('relayChange').textContent = '+' + data.relayChangePercent + '% from last month';
            document.getElementById('costPerMillion').textContent = '$' + (data.monthlyCost / data.totalRelays * 1000000).toFixed(6) + ' per million relays';
            document.getElementById('newEndpoints').textContent = '+' + data.newEndpointsThisMonth + ' this month';
            document.getElementById('teamMembers').textContent = data.teamMembers + ' team members';
            
            // Update recent activity
            const activityList = document.getElementById('recentActivity');
            activityList.innerHTML = '';
            data.recentActivity.forEach(activity => {
                const li = document.createElement('li');
                li.className = 'flex items-center space-x-4';
                li.innerHTML = `
                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                    <div class="flex-1 space-y-1">
                        <p class="text-sm font-medium leading-none">${activity.message}</p>
                        <p class="text-xs text-gray-500">${new Date(activity.timestamp).toLocaleString()}</p>
                    </div>
                `;
                activityList.appendChild(li);
            });
        }

        function showFallbackData() {
            // Show fallback data if API fails
            document.getElementById('totalRelays').textContent = '4.7M';
            document.getElementById('monthlyCost').textContent = '$474.99';
            document.getElementById('activeEndpoints').textContent = '4';
            document.getElementById('planType').textContent = 'Enterprise';
            document.getElementById('relayChange').textContent = '+12.3% from last month';
            document.getElementById('costPerMillion').textContent = '$0.0001 per million relays';
            document.getElementById('newEndpoints').textContent = '+1 this month';
            document.getElementById('teamMembers').textContent = '3 team members';
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadDashboardData);
    </script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <div class="flex-1 space-y-4 p-8 pt-6">
            <div class="flex items-center justify-between space-y-2">
                <h2 class="text-3xl font-bold tracking-tight">pokt.ai Dashboard - Real Data</h2>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-500">Last updated: <span id="lastUpdated"></span></span>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                <div class="rounded-lg border bg-white text-gray-900 shadow-sm">
                    <div class="flex flex-row items-center justify-between space-y-0 p-6 pb-2">
                        <p class="text-sm font-medium leading-none tracking-tight">Total Relays</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="totalRelays">Loading...</div>
                        <p class="text-xs text-gray-500" id="relayChange">Loading...</p>
                    </div>
                </div>

                <div class="rounded-lg border bg-white text-gray-900 shadow-sm">
                    <div class="flex flex-row items-center justify-between space-y-0 p-6 pb-2">
                        <p class="text-sm font-medium leading-none tracking-tight">Monthly Cost</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="monthlyCost">Loading...</div>
                        <p class="text-xs text-gray-500" id="costPerMillion">Loading...</p>
                    </div>
                </div>

                <div class="rounded-lg border bg-white text-gray-900 shadow-sm">
                    <div class="flex flex-row items-center justify-between space-y-0 p-6 pb-2">
                        <p class="text-sm font-medium leading-none tracking-tight">Active Endpoints</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="activeEndpoints">Loading...</div>
                        <p class="text-xs text-gray-500" id="newEndpoints">Loading...</p>
                    </div>
                </div>

                <div class="rounded-lg border bg-white text-gray-900 shadow-sm">
                    <div class="flex flex-row items-center justify-between space-y-0 p-6 pb-2">
                        <p class="text-sm font-medium leading-none tracking-tight">Plan Type</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="planType">Loading...</div>
                        <p class="text-xs text-gray-500" id="teamMembers">Loading...</p>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="rounded-lg border bg-white text-gray-900 shadow-sm">
                <div class="flex flex-row items-center justify-between space-y-0 p-6 pb-2">
                    <h3 class="text-lg font-semibold">Recent Activity</h3>
                </div>
                <div class="p-6 pt-0">
                    <div class="space-y-4" id="recentActivity">
                        <div class="flex items-center space-x-4">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <div class="flex-1 space-y-1">
                                <p class="text-sm font-medium leading-none">Loading recent activity...</p>
                                <p class="text-xs text-gray-500">Please wait...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Banner -->
            <div class="rounded-lg border bg-green-50 border-green-200 p-4">
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <p class="text-sm font-medium text-green-800">System Status: All systems operational</p>
                </div>
            </div>

            <!-- Debug Info -->
            <div class="rounded-lg border bg-blue-50 border-blue-200 p-4">
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                    <p class="text-sm font-medium text-blue-800">Debug: This page fetches real data from /api/dashboard/stats</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Update last updated time
        document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
    </script>
</body>
</html>













